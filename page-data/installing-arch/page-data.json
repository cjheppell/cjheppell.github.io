{"componentChunkName":"component---src-templates-blogpost-js","path":"/installing-arch/","result":{"data":{"site":{"siteMetadata":{"title":"Chris Heppell | Software Engineer"}},"markdownRemark":{"id":"0477fb40-5a6e-5d10-b411-68593d80f569","excerpt":"Recently, a couple of my colleagues have bought second-hand \nThinkpad X230’s and installed Arch Linux \non them. They’ve had nothing but great things to say…","html":"<p>Recently, a couple of my colleagues have bought second-hand\n<a href=\"https://www.lenovo.com/gb/en/laptops/thinkpad/x-series/x230/\">Thinkpad X230’s</a> and installed <a href=\"https://www.archlinux.org/\">Arch Linux</a>\non them. They’ve had nothing but great things to say about it. A relatively cheap laptop, that’s also incredibly performant\nfor development purposes - perfect!</p>\n<p>I’ve heard a lot about Arch in the past, particularly around how troublesome it can be to setup. I thought I’d find out for\nmyself. I didn’t buy a Thinkpad, but I had a spare <a href=\"https://www.msi.com/Laptop/GE60-2OE/Specification\">MSI GE60</a> sat around from\nwhen I went to University, with an unused 1TB hard drive. So I set myself to work.</p>\n<h2>Laying the foundations</h2>\n<p>My MSI GE60 currently has Windows 10 on a 250GB SSD. I replaced the optical disc drive with a <a href=\"https://www.amazon.co.uk/Qumox-Caddy-Universal-External-Enclosure/dp/B00C94G7Q6\">hard drive caddy</a> and repurposed\na 1TB hybrid hard drive/SSD into it. This was the foundation that I’ll install Arch Linux on.</p>\n<h2>A different experience</h2>\n<p>Arch Linux has an interesting install process. Whilst distro’s like <a href=\"https://ubuntu.com/\">Ubuntu</a> can be installed through a wizard via booting\na USB drive or a disc drive, Arch Linux doesn’t (by default at least) have the same experience.</p>\n<p>Rather, you boot into a live environment on a CD or USB, and are expected to mount your disks manually, run some <a href=\"https://wiki.archlinux.org/index.php/installation_guide\">install\ncommands</a> to copy across the Arch distro onto your hard drive, then install your own bootloader, before finally booting the\nhard drive into your new operating system.</p>\n<p>I’ve used Linux off-and-on for a few years, but rarely had to deal with the likes of preparing drives via <code class=\"language-text\">fdisk</code>, so this\nwas an interesting learning experience.</p>\n<h2>What I got wrong</h2>\n<p>Needless to say, I failed a couple of times.</p>\n<h3>Forgetting to mark the root device as bootable</h3>\n<p>The first issue I had was forgetting to mark the root device as bootable. Formatting via <code class=\"language-text\">fdisk</code> went fine by following\nthe <a href=\"https://wiki.archlinux.org/index.php/installation_guide\">Arch Linux install instructions</a>. I expected to run into issues given that my laptop doesn’t have EFI, but uses old-school\nBIOS. This never happened, and configuring for MBR worked just fine.</p>\n<p>What I <em>did</em> get wrong, was forgetting to mark the root device as bootable.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2dbded0145d51bae45718d939b7175c/262c7/fdisk-arch-bootable.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.962962962962962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkElEQVQI102P0QqFIBBENS01E0RLrZD6/5+cywjBfRDG3dmds2JdVyilcF0XqIUQ2LYNz/PAWgspJbTWeN8Xy7Igxjh6x3EghIDeO3LOaK2NuqAwxmCe5zFIzYU0cjilhFIKzvOEcw77vuO+7/H33g8QeuittUJY6zBN0yAjDam4lDQMYNCn6eE1Xzj1/6PvB/cPRJYVgORNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fdisk-bootable.png\"\n        title=\"fdisk-bootable.png\"\n        src=\"/static/e2dbded0145d51bae45718d939b7175c/b9e4f/fdisk-arch-bootable.png\"\n        srcset=\"/static/e2dbded0145d51bae45718d939b7175c/cf440/fdisk-arch-bootable.png 148w,\n/static/e2dbded0145d51bae45718d939b7175c/d2d38/fdisk-arch-bootable.png 295w,\n/static/e2dbded0145d51bae45718d939b7175c/b9e4f/fdisk-arch-bootable.png 590w,\n/static/e2dbded0145d51bae45718d939b7175c/262c7/fdisk-arch-bootable.png 594w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>See that little asterisk in the Boot column for <code class=\"language-text\">/dev/sdb1</code>? That means the drive is marked as bootable.</p>\n<p>I forgot to set this when I created the partition, so by the time I got around to installing <a href=\"https://www.gnu.org/software/grub/\">GRUB as my bootloader</a>,\nit had no idea what to try and boot. Don’t forget to mark your root device as bootable, by enabling the boot flag!\nThis is achieved by using the <code class=\"language-text\">a</code> command in <code class=\"language-text\">fdisk</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 374px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/61307e75f99a1613b35db463a8622c10/08863/toggle-bootable.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.818181818181817%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA8ElEQVQY041RS07DMBS0a8fEiXHsuKRZdYmQqhSEugWFTQ/QDZEgAQqC+59geHbVDVJRF6N5n5mR9cwWbQvvHbJMgDGWwPl5OOr/gFFYQYXEbKapNqeE54Fzge32Bn3vsdtd4226x2ZzgdWKoesY1h0/8DryAXe3HMvlPy98fJAYBobhWeLj3VBoiXHUmMYi9fu9xddnhdeXHBPtfr4tnnp1OlDrMjVFYRHCAnleoqpq1HUDYxzm85a4ollIM++v0DQt+TSEEJBSQilFd+XHG2YpMA5DCOmTlMpgrU0may+TxjlHgTWFm7SLHBE10Rf9vwu5jniYBx5nAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fdisk-toggle-bootable.png\"\n        title=\"fdisk-toggle-bootable.png\"\n        src=\"/static/61307e75f99a1613b35db463a8622c10/08863/toggle-bootable.png\"\n        srcset=\"/static/61307e75f99a1613b35db463a8622c10/cf440/toggle-bootable.png 148w,\n/static/61307e75f99a1613b35db463a8622c10/d2d38/toggle-bootable.png 295w,\n/static/61307e75f99a1613b35db463a8622c10/08863/toggle-bootable.png 374w\"\n        sizes=\"(max-width: 374px) 100vw, 374px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Forgetting to install the network manager utilities before booting</h3>\n<p>One of the things you do as part of the Arch Linux install experience is to connect to your internet while\nbooting into the live USB/CD environment. Having installed all the bits I (thought I) needed, I then booted onto the hard drive\n(<em>not the live CD</em>), only to find my wifi wasn’t connected.</p>\n<p>No worries, I guess I can just run a <code class=\"language-text\">wpa_supplicant</code> command to configure my wireless adapter as I did before.</p>\n<p>That’s worked okay, so it’s time to get an IP address from my router. To do that, I run <code class=\"language-text\">dhcpcd wlan0</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ dhcpcd wlan0\ndhcpcd: command not found</code></pre></div>\n<p>Oh dear. Turns out this isn’t installed by default, and without internet I can’t install it!</p>\n<p>Lesson learned: make sure to install all required network management utilities before you exit out of the live CD/USB environment!</p>\n<h2>Finally up and running</h2>\n<p>After working around these issues, and fixing the odd issue with the GRUB bootloader, I’m happy to say that I’m\nwriting this blog on my MSI GE60 running Arch Linux.</p>\n<p>So far, I’ve found it a wonderful experience. It’s nice to not have any of the bloatware auto-installed from\ndistro’s like Ubuntu.</p>\n<p>I’m currently using the <a href=\"https://www.gnome.org/\">GNOME desktop environment</a>, which seems to be working pretty well. I find it quite\nfamiliar, having used the <a href=\"https://www.omgubuntu.co.uk/2019/06/enable-gnome-classic-mode-ubuntu\">GNOME-classic shell in Ubuntu</a> previously.</p>\n<p>Going forwards, I’m hoping to use Arch as my default Linux distro. Sure, it’s a bit more cumbersome to install\nthan something like Ubuntu, but the control you have over your environment is worth the effort.</p>","frontmatter":{"title":"Installing Arch Linux","date":"December 02, 2019","description":"I recently installed Arch Linux. I got it wrong a few times. Here's what I screwed up."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/installing-arch/","previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello, World"}},"next":null}}}